/*! Delving Instant - v1.3 - 2016-06-17
* https://github.com/delving/delving-instant
* Copyright (c) 2016 Delving B.V. info@delving.eu; Licensed MIT */
Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(this),o=a.length>>>0;if("[object Function]"!={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(n=t),r=Array(o),i=0;o>i;){var s,l;i in a&&(s=a[i],l=e.call(n,s,i,a),r[i]=l),i++}return r}),function(e,t){function n(e,t){for(var n=decodeURI(e),r=s[t?"strict":"loose"].exec(n),i={attr:{},param:{},seg:{}},o=14;o--;)i.attr[a[o]]=r[o]||"";return i.param.query={},i.param.fragment={},i.attr.query.replace(l,function(e,t,n){t&&(i.param.query[t]?jQuery.isArray(i.param.query[t])?i.param.query[t].push(n):i.param.query[t]=[i.param.query[t],n]:i.param.query[t]=n)}),i.attr.fragment.replace(u,function(e,t,n){t&&(i.param.fragment[t]=n)}),i.seg.path=i.attr.path.replace(/^\/+|\/+$/g,"").split("/"),i.seg.fragment=i.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),i.attr.base=i.attr.host?i.attr.protocol+"://"+i.attr.host+(i.attr.port?":"+i.attr.port:""):"",i}function r(e){var n=e.tagName;return n!==t?i[n.toLowerCase()]:n}var i={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},a=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],o={anchor:"fragment"},s={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},l=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,u=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;e.fn.url=function(t){var n="";return this.length&&(n=e(this).attr(r(this[0]))||""),e.url(n,t)},e.url=function(e,r){return 1===arguments.length&&e===!0&&(r=!0,e=t),r=r||!1,e=e||""+window.location,{data:n(e,r),attr:function(e){return e=o[e]||e,e!==t?this.data.attr[e]:this.data.attr},param:function(e){return e!==t?this.data.param.query[e]:this.data.param.query},fparam:function(e){return e!==t?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return e===t?this.data.seg.path:(e=0>e?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return e===t?this.data.seg.fragment:(e=0>e?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}}(jQuery),function(e,t){"use strict";var n=e.History=e.History||{},r=e.jQuery;if(n.Adapter!==t)throw Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,n,r){var i=n&&n.originalEvent&&n.originalEvent[e]||r&&r[e]||t;return i},onDomLoad:function(e){r(e)}},n.init!==t&&n.init()}(window),function(e,t){"use strict";var n=e.console||t,r=e.document,i=e.navigator,a=e.sessionStorage||!1,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,u=e.clearInterval,c=e.JSON,d=e.alert,p=e.History=e.History||{},f=e.history;if(c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode,p.init!==t)throw Error("History.js Core has already been loaded...");p.init=function(){return p.Adapter===t?!1:(p.initCore!==t&&p.initCore(),p.initHtml4!==t&&p.initHtml4(),!0)},p.initCore=function(){if(p.initCore.initialized!==t)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||r.title,p.intervalList=[],p.clearAllIntervals=function(){var e,n=p.intervalList;if(n!==t&&null!==n){for(e=0;n.length>e;e++)u(n[e]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var e,i,a,o,s,l=!(n===t||n.log===t||n.log.apply===t),u=r.getElementById("log");for(l?(o=Array.prototype.slice.call(arguments),e=o.shift(),n.debug!==t?n.debug.apply(n,[e,o]):n.log.apply(n,[e,o])):e="\n"+arguments[0]+"\n",i=1,a=arguments.length;a>i;++i){if(s=arguments[i],"object"==typeof s&&c!==t)try{s=c.stringify(s)}catch(p){}e+="\n"+s+"\n"}return u?(u.value+=e+"\n-----\n",u.scrollTop=u.scrollHeight-u.clientHeight):l||d(e),!0},p.getInternetExplorerMajorVersion=function(){var e=p.getInternetExplorerMajorVersion.cached=p.getInternetExplorerMajorVersion.cached!==t?p.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},p.isInternetExplorer=function(){var e=p.isInternetExplorer.cached=p.isInternetExplorer.cached!==t?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return e},p.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||p.isInternetExplorer()&&8>p.getInternetExplorerMajorVersion())},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&8>p.getInternetExplorerMajorVersion()),hashEscape:Boolean(p.isInternetExplorer()&&7>p.getInternetExplorerMajorVersion())},p.isEmptyObject=function(e){for(var t in e)return!1;return!0},p.cloneObject=function(e){var t,n;return e?(t=c.stringify(e),n=c.parse(t)):n={},n},p.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},p.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},p.getBaseUrl=function(){var e=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return e},p.getPageUrl=function(){var e,t=p.getState(!1,!1),n=(t||{}).url||r.location.href;return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e){return/\./.test(e)?e:e+"/"})},p.getBasePageUrl=function(){var e=r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},p.getFullUrl=function(e,n){var r=e,i=e.substring(0,1);return n=n===t?!0:n,/[a-z]+\:\/\//.test(e)||(r="/"===i?p.getRootUrl()+e.replace(/^\/+/,""):"#"===i?p.getPageUrl().replace(/#.*/,"")+e:"?"===i?p.getPageUrl().replace(/[\?#].*/,"")+e:n?p.getBaseUrl()+e.replace(/^(\.\/)+/,""):p.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),r.replace(/\#$/,"")},p.getShortUrl=function(e){var t=e,n=p.getBaseUrl(),r=p.getRootUrl();return p.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),p.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(e,n){e===t&&(e=!0),n===t&&(n=!0);var r=p.getLastSavedState();return!r&&n&&(r=p.createStateObject()),e&&(r=p.cloneObject(r),r.url=r.cleanUrl||r.url),r},p.getIdByState=function(e){var n,r=p.extractId(e.url);if(!r)if(n=p.getStateString(e),p.stateToId[n]!==t)r=p.stateToId[n];else if(p.store.stateToId[n]!==t)r=p.store.stateToId[n];else{for(;;)if(r=(new Date).getTime()+(Math.random()+"").replace(/\D/g,""),p.idToState[r]===t&&p.store.idToState[r]===t)break;p.stateToId[n]=r,p.idToState[r]=e}return r},p.normalizeState=function(e){var n,i;return e&&"object"==typeof e||(e={}),e.normalized!==t?e:(e.data&&"object"==typeof e.data||(e.data={}),n={},n.normalized=!0,n.title=e.title||"",n.url=p.getFullUrl(p.unescapeString(e.url||r.location.href)),n.hash=p.getShortUrl(n.url),n.data=p.cloneObject(e.data),n.id=p.getIdByState(n),n.cleanUrl=n.url.replace(/\??\&_suid.*/,""),n.url=n.cleanUrl,i=!p.isEmptyObject(n.data),(n.title||i)&&(n.hash=p.getShortUrl(n.url).replace(/\??\&_suid.*/,""),/\?/.test(n.hash)||(n.hash+="?"),n.hash+="&_suid="+n.id),n.hashedUrl=p.getFullUrl(n.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(n)&&(n.url=n.hashedUrl),n)},p.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=p.normalizeState(r)},p.getStateById=function(e){e+="";var n=p.idToState[e]||p.store.idToState[e]||t;return n},p.getStateString=function(e){var t,n,r;return t=p.normalizeState(e),n={data:t.data,title:e.title,url:e.url},r=c.stringify(n)},p.getStateId=function(e){var t,n;return t=p.normalizeState(e),n=t.id},p.getHashByState=function(e){var t,n;return t=p.normalizeState(e),n=t.hash},p.extractId=function(e){var t,n,r;return n=/(.*)\&_suid=([0-9]+)$/.exec(e),r=n?n[1]||e:e,t=n?(n[2]||"")+"":"",t||!1},p.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},p.extractState=function(e,t){var n,r,i=null;return t=t||!1,n=p.extractId(e),n&&(i=p.getStateById(n)),i||(r=p.getFullUrl(e),n=p.getIdByUrl(r)||!1,n&&(i=p.getStateById(n)),i||!t||p.isTraditionalAnchor(e)||(i=p.createStateObject(null,null,r))),i},p.getIdByUrl=function(e){var n=p.urlToId[e]||p.store.urlToId[e]||t;return n},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||t},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||t},p.hasUrlDuplicate=function(e){var t,n=!1;return t=p.extractState(e.url),n=t&&t.id!==e.id},p.storeState=function(e){return p.urlToId[e.url]=e.id,p.storedStates.push(p.cloneObject(e)),e},p.isLastSavedState=function(e){var t,n,r,i=!1;return p.savedStates.length&&(t=e.id,n=p.getLastSavedState(),r=n.id,i=t===r),i},p.saveState=function(e){return p.isLastSavedState(e)?!1:(p.savedStates.push(p.cloneObject(e)),!0)},p.getStateByIndex=function(e){var n=null;return n=e===t?p.savedStates[p.savedStates.length-1]:0>e?p.savedStates[p.savedStates.length+e]:p.savedStates[e]},p.getHash=function(){var e=p.unescapeHash(r.location.hash);return e},p.unescapeString=function(e){for(var t,n=e;;){if(t=n,t===n)break;n=t}return n},p.unescapeHash=function(e){var t=p.normalizeHash(e);return t=p.unescapeString(t)},p.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},p.setHash=function(e,t){var n,i,a;return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:t}),!1):(n=p.escapeHash(e),p.busy(!0),i=p.extractState(e,!0),i&&!p.emulated.pushState?p.pushState(i.data,i.title,i.url,!1):r.location.hash!==n&&(p.bugs.setHash?(a=p.getPageUrl(),p.pushState(null,null,a+"#"+n,!1)):r.location.hash=n),p)},p.escapeHash=function(t){var n=p.normalizeHash(t);return n=e.escape(n),p.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},p.getHashByUrl=function(e){var t=(e+"").replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=p.unescapeHash(t)},p.setTitle=function(e){var t,n=e.title;n||(t=p.getStateByIndex(0),t&&t.url===e.url&&(n=t.title||p.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return r.title=n,p},p.queues=[],p.busy=function(e){if(e!==t?p.busy.flag=e:p.busy.flag===t&&(p.busy.flag=!1),!p.busy.flag){s(p.busy.timeout);var n=function(){var e,t,r;if(!p.busy.flag)for(e=p.queues.length-1;e>=0;--e)t=p.queues[e],0!==t.length&&(r=t.shift(),p.fireQueueItem(r),p.busy.timeout=o(n,p.options.busyDelay))};p.busy.timeout=o(n,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(e){return e.callback.apply(e.scope||p,e.args||[])},p.pushQueue=function(e){return p.queues[e.queue||0]=p.queues[e.queue||0]||[],p.queues[e.queue||0].push(e),p},p.queue=function(e,n){return"function"==typeof e&&(e={callback:e}),n!==t&&(e.queue=n),p.busy()?p.pushQueue(e):p.fireQueueItem(e),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(s(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(e){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=o(function(){return p.doubleCheckClear(),p.stateChanged||e(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t,n=p.extractState(r.location.href);if(!p.isLastSavedState(n))return t=n,t||(t=p.createStateObject()),p.Adapter.trigger(e,"popstate"),p},p.back=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)p.forward(t);else{if(!(0>e))throw Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)p.back(t)}return p},p.emulated.pushState){var g=function(){};p.pushState=p.pushState||g,p.replaceState=p.replaceState||g}else p.onPopState=function(t,n){var i,a,o=!1,s=!1;return p.doubleCheckComplete(),(i=p.getHash())?(a=p.extractState(i||r.location.href,!0),a?p.replaceState(a.data,a.title,a.url,!1):(p.Adapter.trigger(e,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(o=p.Adapter.extractEventData("state",t,n)||!1,s=o?p.getStateById(o):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(r.location.href),s||(s=p.createStateObject(null,null,r.location.href)),p.expectedStateId=!1,p.isLastSavedState(s)?(p.busy(!1),!1):(p.storeState(s),p.saveState(s),p.setTitle(s),p.Adapter.trigger(e,"statechange"),p.busy(!1),!0))},p.Adapter.bind(e,"popstate",p.onPopState),p.pushState=function(t,n,r,i){if(p.getHashByUrl(r)&&p.emulated.pushState)throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:i}),!1;p.busy(!0);var a=p.createStateObject(t,n,r);return p.isLastSavedState(a)?p.busy(!1):(p.storeState(a),p.expectedStateId=a.id,f.pushState(a.id,a.title,a.url),p.Adapter.trigger(e,"popstate")),!0},p.replaceState=function(t,n,r,i){if(p.getHashByUrl(r)&&p.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:i}),!1;p.busy(!0);var a=p.createStateObject(t,n,r);return p.isLastSavedState(a)?p.busy(!1):(p.storeState(a),p.expectedStateId=a.id,f.replaceState(a.id,a.title,a.url),p.Adapter.trigger(e,"popstate")),!0};if(a){try{p.store=c.parse(a.getItem("History.store"))||{}}catch(h){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(e,"beforeunload",p.clearAllIntervals),p.Adapter.bind(e,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(r.location.href,!0))),a&&(p.onUnload=function(){var e,t;try{e=c.parse(a.getItem("History.store"))||{}}catch(n){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in p.idToState)p.idToState.hasOwnProperty(t)&&(e.idToState[t]=p.idToState[t]);for(t in p.urlToId)p.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=p.urlToId[t]);for(t in p.stateToId)p.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=p.stateToId[t]);p.store=e,p.normalizeStore(),a.setItem("History.store",c.stringify(e))},p.intervalList.push(l(p.onUnload,p.options.storeInterval)),p.Adapter.bind(e,"beforeunload",p.onUnload),p.Adapter.bind(e,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(l(p.safariStatePoll,p.options.safariPollInterval)),("Apple Computer, Inc."===i.vendor||"Mozilla"===(i.appCodeName||""))&&(p.Adapter.bind(e,"hashchange",function(){p.Adapter.trigger(e,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(e,"hashchange")})))},p.init()}(window),function(e){e.cookie=function(t,n,r){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(n))||null===n||void 0===n)){if(r=e.extend({},r),(null===n||void 0===n)&&(r.expires=-1),"number"==typeof r.expires){var i=r.expires,a=r.expires=new Date;a.setDate(a.getDate()+i)}return n+="",document.cookie=[encodeURIComponent(t),"=",r.raw?n:encodeURIComponent(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}r=n||{};for(var o,s=r.raw?function(e){return e}:decodeURIComponent,l=document.cookie.split("; "),u=0;o=l[u]&&l[u].split("=");u++)if(s(o[0])===t)return s(o[1]||"");return null}}(jQuery),function(e){e.expander={version:"1.4.3",defaults:{slicePoint:100,preserveWords:!0,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null}},e.fn.expander=function(t){function n(e,t){var n="span",r=e.summary;return t?(n="div",h.test(r)&&!e.expandAfterSummary?r=r.replace(h,e.moreLabel+"$1"):r+=e.moreLabel,r='<div class="'+e.summaryClass+'">'+r+"</div>"):r+=e.moreLabel,[r,"<",n+' class="'+e.detailClass+'"',">",e.details,"</"+n+">"].join("")}function r(e){var t='<span class="'+e.moreClass+'">'+e.expandPrefix;return t+='<a href="#">'+e.expandText+"</a></span>"}function i(t,n){return t.lastIndexOf("<")>t.lastIndexOf(">")&&(t=t.slice(0,t.lastIndexOf("<"))),n&&(t=t.replace(d,"")),e.trim(t)}function a(e,t){t.stop(!0,!0)[e.collapseEffect](e.collapseSpeed,function(){var n=t.prev("span."+e.moreClass).show();n.length||t.parent().children("div."+e.summaryClass).show().find("span."+e.moreClass).show()})}function o(t,n,r){t.collapseTimer&&(l=setTimeout(function(){a(t,n),e.isFunction(t.onCollapse)&&t.onCollapse.call(r,!1)},t.collapseTimer))}var s="init";"string"==typeof t&&(s=t,t={});var l,u=e.extend({},e.expander.defaults,t),c=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,d=u.wordEnd||/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+)$/,p=/<\/?(\w+)[^>]*>/g,f=/<(\w+)[^>]*>/g,g=/<\/(\w+)>/g,h=/(<\/[^>]+>)\s*$/,m=/^<[^>]+>.?/,v={init:function(){this.each(function(){function t(e){e.preventDefault(),C.hide(),A.hide(),k.beforeExpand&&M.beforeExpand.call(H),S.stop(!1,!0)[M.expandEffect](F,function(){S.css({zoom:""}),k.afterExpand&&M.afterExpand.call(H),o(M,S,H)})}var s,d,h,v,y,w,x,T,b,E,S,C,I=[],O=[],k={},H=this,L=e(this),A=e([]),M=e.extend({},u,L.data("expander")||e.meta&&L.data()||{}),P=!!L.find("."+M.detailClass).length,B=!!L.find("*").filter(function(){var t=e(this).css("display");return/^block|table|list/.test(t)}).length,R=B?"div":"span",$=R+"."+M.detailClass,N="span."+M.moreClass,F=M.expandSpeed||0,z=e.trim(L.html()),D=(e.trim(L.text()),z.slice(0,M.slicePoint));if(!e.data(this,"expanderInit")){for(e.data(this,"expanderInit",!0),e.each(["onSlice","beforeExpand","afterExpand","onCollapse"],function(t,n){k[n]=e.isFunction(M[n])}),D=i(D),y=D.replace(p,"").length;M.slicePoint>y;)v=z.charAt(D.length),"<"==v&&(v=z.slice(D.length).match(m)[0]),D+=v,y++;for(D=i(D,M.preserveWords),w=D.match(f)||[],x=D.match(g)||[],h=[],e.each(w,function(e,t){c.test(t)||h.push(t)}),w=h,d=x.length,s=0;d>s;s++)x[s]=x[s].replace(g,"$1");if(e.each(w,function(t,n){var r=n.replace(f,"$1"),i=e.inArray(r,x);-1===i?(I.push(n),O.push("</"+r+">")):x.splice(i,1)}),O.reverse(),P)b=L.find($).remove().html(),D=L.html(),z=D+b,T="";else{if(b=z.slice(D.length),E=e.trim(b.replace(p,"")),""===E||E.split(/\s+/).length<M.widow)return;T=O.pop()||"",D+=O.join(""),b=I.join("")+b}M.moreLabel=L.find(N).length?"":r(M),B&&(b=z),D+=T,M.summary=D,M.details=b,M.lastCloseTag=T,k.onSlice&&(h=M.onSlice.call(H,M),M=h&&h.details?h:M);var j=n(M,B);L.html(j),S=L.find($),C=L.find(N),S[M.collapseEffect](0),C.find("a").unbind("click.expander").bind("click.expander",t),A=L.find("div."+M.summaryClass),M.userCollapse&&!L.find("span."+M.lessClass).length&&L.find($).append('<span class="'+M.lessClass+'">'+M.userCollapsePrefix+'<a href="#">'+M.userCollapseText+"</a></span>"),L.find("span."+M.lessClass+" a").unbind("click.expander").bind("click.expander",function(t){t.preventDefault(),clearTimeout(l);var n=e(this).closest($);a(M,n),k.onCollapse&&M.onCollapse.call(H,!0)})}})},destroy:function(){this.data("expander")&&(this.removeData("expander"),this.each(function(){var t=e(this),n=e.meta?e.extend({},u,t.data()):u,r=t.find("."+n.detailClass).contents();t.find("."+n.moreClass).remove(),t.find("."+n.summaryClass).remove(),t.find("."+n.detailClass).after(r).remove(),t.find("."+n.lessClass).remove()}))}};return v[s]&&v[s].call(this),this},e.fn.expander.defaults=e.expander.defaults}(jQuery),function(e){function t(t,n,r,i){var a={data:i||0===i||i===!1?i:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:u,nest:c,wrap:d,html:p,update:f};return t&&e.extend(a,t,{nodes:[],parent:n}),r&&(a.tmpl=r,a._ctnt=a._ctnt||a.tmpl(e,a),a.key=++T,(E.length?w:y)[T]=a),a}function n(t,i,a){var o,s=a?e.map(a,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+m+'="'+t.key+'" $2'):e:n(e,t,e._ctnt)}):t;return i?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,i,a){o=e(i).get(),l(o),n&&(o=r(n).concat(o)),a&&(o=o.concat(r(a)))}),o?o:r(s))}function r(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function i(t){return Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,a,s,l){var u,c,d,p=e.tmpl.tag[r];if(!p)throw"Unknown template tag: "+r;return u=p._default||[],s&&!/\w$/.test(a)&&(a+=s,s=""),a?(a=o(a),l=l?","+o(l)+")":s?")":"",c=s?a.indexOf(".")>-1?a+o(s):"("+a+").call($item"+l:a,d=s?c:"(typeof("+a+")==='function'?("+a+").call($item):("+a+"))"):d=c=u.$1||"null",i=o(i),"');"+p[n?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(d).split("$1").join(c).split("$2").join(i||u.$2||"")+"__.push('"})+"');}return __;")}function a(t,r){t._wrap=n(t,!0,e.isArray(r)?r:[v.test(r)?r:e(r).html()]).join("")}function o(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function l(n){function r(n){function r(e){e+=u,o=c[e]=c[e]||t(o,y[o.parent.key+u]||o.parent)}var i,a,o,s,l=n;if(s=n.getAttribute(m)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(i=l.getAttribute(m)););i!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(m)||0:0,(o=y[s])||(o=w[s],o=t(o,y[l]||w[l]),o.key=++T,y[T]=o),b&&r(s)),n.removeAttribute(m)}else b&&(o=e.data(n,"tmplItem"))&&(r(o.key),y[o.key]=o,l=e.data(n.parentNode,"tmplItem"),l=l?l.key:0);if(o){for(a=o;a&&a.key!=l;)a.nodes.push(n),a=a.parent;delete o._ctnt,delete o._wrap,e.data(n,"tmplItem",o)}}var i,a,o,s,l,u="_"+b,c={};for(o=0,s=n.length;s>o;o++)if(1===(i=n[o]).nodeType){for(a=i.getElementsByTagName("*"),l=a.length-1;l>=0;l--)r(a[l]);r(i)}}function u(e,t,n,r){return e?(E.push({_:e,tmpl:t,item:this,data:n,options:r}),undefined):E.pop()}function c(t,n,r){return e.tmpl(e.template(t),n,r,this)}function d(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function p(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||s(e)})}function f(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var g,h=e.fn.domManip,m="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,y={},w={},x={key:0,data:{}},T=0,b=0,E=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var i,a,o,s,l=[],u=e(r),c=1===this.length&&this[0].parentNode;if(g=y||{},c&&11===c.nodeType&&1===c.childNodes.length&&1===u.length)u[n](this[0]),l=this;else{for(a=0,o=u.length;o>a;a++)b=a,i=(a>0?this.clone(!0):this).get(),e(u[a])[n](i),l=l.concat(i);b=0,l=this.pushStack(l,t,u.selector)}return s=g,g=null,e.tmpl.complete(s),l}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,r){if(t[0]&&e.isArray(t[0])){for(var i,a=e.makeArray(arguments),o=t[0],s=o.length,l=0;s>l&&!(i=e.data(o[l++],"tmplItem")););i&&b&&(a[2]=function(t){e.tmpl.afterManip(this,t,r)}),h.apply(this,a)}else h.apply(this,arguments);return b=0,g||e.tmpl.complete(y),this}}),e.extend({tmpl:function(r,i,o,s){var l,u=!s;if(u)s=x,r=e.template[r]||e.template(null,r),w={};else if(!r)return r=s.tmpl,y[s.key]=s,s.nodes=[],s.wrapped&&a(s,s.wrapped),e(n(s,null,s.tmpl(e,s)));return r?("function"==typeof i&&(i=i.call(s||{})),o&&o.wrapped&&a(o,o.wrapped),l=e.isArray(i)?e.map(i,function(e){return e?t(o,s,r,e):null}):[t(o,s,r,i)],u?e(n(s,null,l)):l):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||x},template:function(t,n){return n?("string"==typeof n?n=i(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",i(n.innerHTML))),"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,v.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){y={}},afterManip:function(t,n,r){var i=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];r.call(t,n),l(i),b++}})}(jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),r=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){r.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var r,i=this.$element.find(".item.active"),a=n||i[t](),o=this.interval,s="next"==t?"left":"right",l="next"==t?"first":"last",u=this;if(this.sliding=!0,o&&this.pause(),a=a.length?a:this.$element.find(".item")[l](),r=e.Event("slide",{relatedTarget:a[0],direction:s}),!a.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(u.$indicators.children()[u.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(r),r.isDefaultPrevented())return;a.addClass(t),a[0].offsetWidth,i.addClass(s),a.addClass(s),this.$element.one(e.support.transition.end,function(){a.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})}else{if(this.$element.trigger(r),r.isDefaultPrevented())return;i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),a=e.extend({},e.fn.carousel.defaults,"object"==typeof n&&n),o="string"==typeof n?n:a.slide;i||r.data("carousel",i=new t(this,a)),"number"==typeof n?i.to(n):o?i[o]():a.interval&&i.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,r,i=e(this),a=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=e.extend({},a.data(),i.data());a.carousel(o),(r=i.attr("data-slide-to"))&&a.data("carousel").pause().to(r).cycle(),t.preventDefault()})}(window.jQuery);var swfobject=function(){function e(){if(!_){try{var e=$.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}_=!0;for(var n=z.length,r=0;n>r;r++)z[r]()}}function t(e){_?e():z[z.length]=e}function n(e){if(typeof R.addEventListener!=k)R.addEventListener("load",e,!1);else if(typeof $.addEventListener!=k)$.addEventListener("load",e,!1);else if(typeof R.attachEvent!=k)v(R,"onload",e);else if("function"==typeof R.onload){var t=R.onload;R.onload=function(){t(),e()}}else R.onload=e}function r(){F?i():a()}function i(){var e=$.getElementsByTagName("body")[0],t=m(H);t.setAttribute("type",M);var n=e.appendChild(t);if(n){var r=0;(function(){if(typeof n.GetVariable!=k){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),q.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>r)return r++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),n=null,a()})()}else a()}function a(){var e=D.length;if(e>0)for(var t=0;e>t;t++){var n=D[t].id,r=D[t].callbackFn,i={success:!1,id:n};if(q.pv[0]>0){var a=h(n);if(a)if(!y(D[t].swfVersion)||q.wk&&312>q.wk)if(D[t].expressInstall&&s()){var c={};c.data=D[t].expressInstall,c.width=a.getAttribute("width")||"0",c.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(c.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(c.align=a.getAttribute("align"));for(var d={},p=a.getElementsByTagName("param"),f=p.length,g=0;f>g;g++)"movie"!=p[g].getAttribute("name").toLowerCase()&&(d[p[g].getAttribute("name")]=p[g].getAttribute("value"));l(c,d,n,r)}else u(a),r&&r(i);else x(n,!0),r&&(i.success=!0,i.ref=o(n),r(i))}else if(x(n,!0),r){var m=o(n);m&&typeof m.SetVariable!=k&&(i.success=!0,i.ref=m),r(i)
}}}function o(e){var t=null,n=h(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=k)t=n;else{var r=n.getElementsByTagName(H)[0];r&&(t=r)}return t}function s(){return!V&&y("6.0.65")&&(q.win||q.mac)&&!(q.wk&&312>q.wk)}function l(e,t,n,r){V=!0,S=r||null,C={success:!1,id:n};var i=h(n);if(i){"OBJECT"==i.nodeName?(b=c(i),E=null):(b=i,E=n),e.id=P,(typeof e.width==k||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==k||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),$.title=$.title.slice(0,47)+" - Flash Player Installation";var a=q.ie&&q.win?"ActiveX":"PlugIn",o="MMredirectURL="+(""+R.location).replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+$.title;if(typeof t.flashvars!=k?t.flashvars+="&"+o:t.flashvars=o,q.ie&&q.win&&4!=i.readyState){var s=m("div");n+="SWFObjectNew",s.setAttribute("id",n),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function u(e){if(q.ie&&q.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=m("div");if(q.win&&q.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(H)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,a=0;i>a;a++)1==r[a].nodeType&&"PARAM"==r[a].nodeName||8==r[a].nodeType||t.appendChild(r[a].cloneNode(!0))}}return t}function d(e,t,n){var r,i=h(n);if(q.wk&&312>q.wk)return r;if(i)if(typeof e.id==k&&(e.id=n),q.ie&&q.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",j[j.length]=e.id,r=h(e.id)}else{var u=m(H);u.setAttribute("type",M);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,e[c]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(u,d,t[d]);i.parentNode.replaceChild(u,i),r=u}return r}function p(e,t,n){var r=m("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function f(e){var t=h(e);t&&"OBJECT"==t.nodeName&&(q.ie&&q.win?(t.style.display="none",function(){4==t.readyState?g(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function g(e){var t=h(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function h(e){var t=null;try{t=$.getElementById(e)}catch(n){}return t}function m(e){return $.createElement(e)}function v(e,t,n){e.attachEvent(t,n),U[U.length]=[e,t,n]}function y(e){var t=q.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function w(e,t,n,r){if(!q.ie||!q.mac){var i=$.getElementsByTagName("head")[0];if(i){var a=n&&"string"==typeof n?n:"screen";if(r&&(I=null,O=null),!I||O!=a){var o=m("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),I=i.appendChild(o),q.ie&&q.win&&typeof $.styleSheets!=k&&$.styleSheets.length>0&&(I=$.styleSheets[$.styleSheets.length-1]),O=a}q.ie&&q.win?I&&typeof I.addRule==H&&I.addRule(e,t):I&&typeof $.createTextNode!=k&&I.appendChild($.createTextNode(e+" {"+t+"}"))}}}function x(e,t){if(X){var n=t?"visible":"hidden";_&&h(e)?h(e).style.visibility=n:w("#"+e,"visibility:"+n)}}function T(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=k?encodeURIComponent(e):e}var b,E,S,C,I,O,k="undefined",H="object",L="Shockwave Flash",A="ShockwaveFlash.ShockwaveFlash",M="application/x-shockwave-flash",P="SWFObjectExprInst",B="onreadystatechange",R=window,$=document,N=navigator,F=!1,z=[r],D=[],j=[],U=[],_=!1,V=!1,X=!0,q=function(){var e=typeof $.getElementById!=k&&typeof $.getElementsByTagName!=k&&typeof $.createElement!=k,t=N.userAgent.toLowerCase(),n=N.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(t),i=n?/mac/.test(n):/mac/.test(t),a=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;if(typeof N.plugins!=k&&typeof N.plugins[L]==H)l=N.plugins[L].description,!l||typeof N.mimeTypes!=k&&N.mimeTypes[M]&&!N.mimeTypes[M].enabledPlugin||(F=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof R.ActiveXObject!=k)try{var u=new ActiveXObject(A);u&&(l=u.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:s,wk:a,ie:o,win:r,mac:i}}();return function(){q.w3&&((typeof $.readyState!=k&&"complete"==$.readyState||typeof $.readyState==k&&($.getElementsByTagName("body")[0]||$.body))&&e(),_||(typeof $.addEventListener!=k&&$.addEventListener("DOMContentLoaded",e,!1),q.ie&&q.win&&($.attachEvent(B,function(){"complete"==$.readyState&&($.detachEvent(B,arguments.callee),e())}),R==top&&function(){if(!_){try{$.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),q.wk&&function(){return _?void 0:/loaded|complete/.test($.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(e)))}(),function(){q.ie&&q.win&&window.attachEvent("onunload",function(){for(var e=U.length,t=0;e>t;t++)U[t][0].detachEvent(U[t][1],U[t][2]);for(var n=j.length,r=0;n>r;r++)f(j[r]);for(var i in q)q[i]=null;q=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}(),{registerObject:function(e,t,n,r){if(q.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,D[D.length]=i,x(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){return q.w3?o(e):void 0},embedSWF:function(e,n,r,i,a,o,u,c,p,f){var g={success:!1,id:n};q.w3&&!(q.wk&&312>q.wk)&&e&&n&&r&&i&&a?(x(n,!1),t(function(){r+="",i+="";var t={};if(p&&typeof p===H)for(var h in p)t[h]=p[h];t.data=e,t.width=r,t.height=i;var m={};if(c&&typeof c===H)for(var v in c)m[v]=c[v];if(u&&typeof u===H)for(var w in u)typeof m.flashvars!=k?m.flashvars+="&"+w+"="+u[w]:m.flashvars=w+"="+u[w];if(y(a)){var T=d(t,m,n);t.id==n&&x(n,!0),g.success=!0,g.ref=T}else{if(o&&s())return t.data=o,l(t,m,n,f),void 0;x(n,!0)}f&&f(g)})):f&&f(g)},switchOffAutoHideShow:function(){X=!1},ua:q,getFlashPlayerVersion:function(){return{major:q.pv[0],minor:q.pv[1],release:q.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,n){return q.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,r){q.w3&&s()&&l(e,t,n,r)},removeSWF:function(e){q.w3&&f(e)},createCSS:function(e,t,n,r){q.w3&&w(e,t,n,r)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=$.location.search||$.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return T(t);for(var n=t.split("&"),r=0;n.length>r;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return T(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(V){var e=h(P);e&&b&&(e.parentNode.replaceChild(b,e),E&&(x(E,!0),q.ie&&q.win&&(b.style.display="block")),S&&S(C)),V=!1}}}}();(function(e,t,n,r){var i="100%",a=10,o="absolute",s="relative",l="hidden",u=" while executing ",c="function",d="mousewheel",p="px",f="inline-block",g="span",h="0px",m="none",v="div",y="fixed",w="undefined",x=",",T="number",b="",E="string",S=null,C=!0,I=.5,O=!1;e.Seadragon||(e.Seadragon={});var k=e.Seadragon,H=k.Config;(function(){H||(H=k.Config={debugMode:O,animationTime:1.5,blendTime:I,alwaysBlend:O,autoHideControls:C,constrainDuringPan:C,immediateRender:O,logarithmicZoom:C,wrapHorizontal:O,wrapVertical:O,wrapOverlays:O,transformOverlays:O,minZoomDimension:S,minZoomImageRatio:.8,maxZoomPixelRatio:2,visibilityRatio:.8,springStiffness:5,imageLoaderLimit:2,clickTimeThreshold:200,clickDistThreshold:5,zoomPerClick:2,zoomPerScroll:n.pow(2,1/3),zoomPerSecond:2,proxyUrl:S,imagePath:"img/"})})();var L=k.Strings;(function(){var e="Hmm, this doesn't appear to be a valid Deep Zoom Image.";L||(L=k.Strings={Errors:{Failure:"Sorry, but Seadragon Ajax can't run on your browser!\nPlease try using IE 8 or Firefox 3.\n",Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:e,Xml:e,Empty:"You asked us to open nothing, so we did just that.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left cubiss ({0} {1}).",Unknown:"Whoops, something inexplicably went wrong. Sorry!"},Messages:{Loading:"Loading..."},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in (you can also use your mouse's scroll wheel)",ZoomOut:"Zoom out (you can also use your mouse's scroll wheel)"}},L.getString=function(e){for(var t=e.split("."),n=L,r=0;t.length>r;r++)n=n[t[r]]||{};typeof n!=E&&(n=b);var i=arguments;return n.replace(/\{\d+\}/g,function(e){var t=parseInt(e.match(/\d+/))+1;return i.length>t?i[t]:b})},L.setString=function(e,t){for(var n=e.split("."),r=L,i=0;n.length-1>i;i++)r[n[i]]||(r[n[i]]={}),r=r[n[i]];r[n[i]]=t})})();var A=function(){this.log=function(t,n){var r=e.console||{},i=H.debugMode;i&&r.log?r.log(t):i&&n&&alert(t)},this.error=function(t,n){var r=e.console||{},i=H.debugMode;if(i&&r.error?r.error(t):i&&alert(t),i)throw n||Error(t)},this.fail=function(e){throw alert(L.getString("Errors.Failure")),Error(e)}};A=k.Debug=new A;var M=k.Profiler=function(){var e=this,t=e,n=O,r=0,i=S,a=S,o=1/0,s=0,l=0,u=1/0,c=0,d=0;e.getAvgUpdateTime=function(){return s},e.getMinUpdateTime=function(){return o},e.getMaxUpdateTime=function(){return l},e.getAvgIdleTime=function(){return c},e.getMinIdleTime=function(){return u},e.getMaxIdleTime=function(){return d},e.isMidUpdate=function(){return n},e.getNumUpdates=function(){return r},e.beginUpdate=function(){if(n&&t.endUpdate(),n=C,i=(new Date).getTime(),!(1>r)){var e=i-a;c=(c*(r-1)+e)/r,u>e&&(u=e),e>d&&(d=e)}},e.endUpdate=function(){if(n){a=(new Date).getTime(),n=O;var e=a-i;r++,s=(s*(r-1)+e)/r,o>e&&(o=e),e>l&&(l=e)}},e.clearProfile=function(){n=O,r=0,i=S,a=S,o=1/0,s=0,l=0,u=1/0,c=0,d=0}},P=k.Point;(function(){if(!P){P=k.Point=function(e,t){this.x=typeof e==T?e:0,this.y=typeof t==T?t:0};var e=P.prototype;e.plus=function(e){return new P(this.x+e.x,this.y+e.y)},e.minus=function(e){return new P(this.x-e.x,this.y-e.y)},e.times=function(e){return new P(this.x*e,this.y*e)},e.divide=function(e){return new P(this.x/e,this.y/e)},e.negate=function(){return new P(-this.x,-this.y)},e.distanceTo=function(e){return n.sqrt(n.pow(this.x-e.x,2)+n.pow(this.y-e.y,2))},e.apply=function(e){return new P(e(this.x),e(this.y))},e.equals=function(e){return e instanceof P&&this.x===e.x&&this.y===e.y},e.toString=function(){return"("+this.x+x+this.y+")"}}})();var B=k.Rect;(function(){if(!B){B=k.Rect=function(e,t,n,r){var i=this;i.x=typeof e==T?e:0,i.y=typeof t==T?t:0,i.width=typeof n==T?n:0,i.height=typeof r==T?r:0};var e=B.prototype;e.getAspectRatio=function(){return this.width/this.height},e.getTopLeft=function(){return new P(this.x,this.y)},e.getBottomRight=function(){var e=this;return new P(e.x+e.width,e.y+e.height)},e.getCenter=function(){var e=this;return new P(e.x+e.width/2,e.y+e.height/2)},e.getSize=function(){return new P(this.width,this.height)},e.equals=function(e){var t=this;return e instanceof B&&t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},e.toString=function(){var e=this;return"["+e.x+x+e.y+x+e.width+"x"+e.height+"]"}}})();var R=k.Spring=function(e){function t(e){var t=H.springStiffness;return(1-n.exp(-e*t))/(1-n.exp(-t))}var r=this,i=typeof e==T?e:0,a=i,o=i,s=(new Date).getTime(),l=s,u=s;r.getCurrent=function(){return i},r.getTarget=function(){return o},r.resetTo=function(e){o=e,u=s,a=o,l=u},r.springTo=function(e){a=i,l=s,o=e,u=l+1e3*H.animationTime},r.shiftBy=function(e){a+=e,o+=e},r.update=function(){s=(new Date).getTime(),i=s>=u?o:a+(o-a)*t((s-l)/(u-l))}},$=k.Browser={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},N=function(){function r(e,n){return n&&e!=t.body?t.body:e.offsetParent}var i="DOMMouseScroll",a=this,o=a,s=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],l={bmp:O,jpeg:C,jpg:C,png:C,tif:O,wdp:O},u=$.UNKNOWN,x=0,I=O,k={};(function(){var n=navigator.appName,r=navigator.appVersion,i=navigator.userAgent;if("Microsoft Internet Explorer"==n&&e.attachEvent&&e.ActiveXObject){var a=i.indexOf("MSIE");u=$.IE,x=parseFloat(i.substring(a+5,i.indexOf(";",a)));var o=t.documentMode;typeof o!==w&&(x=o)}else if("Netscape"==n&&e.addEventListener){var s=i.indexOf("Firefox"),l=i.indexOf("Safari"),c=i.indexOf("Chrome");if(s>=0)u=$.FIREFOX,x=parseFloat(i.substring(s+8));else if(l>=0){var d=i.substring(0,l).lastIndexOf("/");u=c>=0?$.CHROME:$.SAFARI,x=parseFloat(i.substring(d+1,l))}}else"Opera"==n&&e.opera&&e.attachEvent&&(u=$.OPERA,x=parseFloat(r));for(var p=e.location.search.substring(1),f=p.split("&"),g=0;f.length>g;g++){var h=f[g],m=h.indexOf("=");m>0&&(k[h.substring(0,m)]=decodeURIComponent(h.substring(m+1)))}I=u==$.IE&&9>x||u==$.CHROME&&2>x})(),a.getBrowser=function(){return u},a.getBrowserVersion=function(){return x},a.getElement=function(e){return typeof e==E&&(e=t.getElementById(e)),e},a.getElementPosition=function(e){for(var e=o.getElement(e),t=new P,n=o.getElementStyle(e).position==y,i=r(e,n);i;)t.x+=e.offsetLeft,t.y+=e.offsetTop,n&&(t=t.plus(o.getPageScroll())),e=i,n=o.getElementStyle(e).position==y,i=r(e,n);return t},a.getElementSize=function(e){var e=o.getElement(e);return new P(e.clientWidth,e.clientHeight)},a.getElementStyle=function(t){var t=o.getElement(t);return t.currentStyle?t.currentStyle:e.getComputedStyle?e.getComputedStyle(t,b):(A.fail("Unknown element style, no known technique."),void 0)},a.getEvent=function(t){return t?t:e.event},a.getMousePosition=function(e){var e=o.getEvent(e),n=new P;return e.type==i&&u==$.FIREFOX&&3>x?(n.x=e.screenX,n.y=e.screenY):typeof e.pageX==T?(n.x=e.pageX,n.y=e.pageY):typeof e.clientX==T?(n.x=e.clientX+t.body.scrollLeft+t.documentElement.scrollLeft,n.y=e.clientY+t.body.scrollTop+t.documentElement.scrollTop):A.fail("Unknown event mouse position, no known technique."),n},a.getMouseScroll=function(e){var e=o.getEvent(e),t=0;return typeof e.wheelDelta==T?t=e.wheelDelta:typeof e.detail==T?t=-1*e.detail:A.fail("Unknown event mouse scroll, no known technique."),t?t/n.abs(t):0},a.getPageScroll=function(){var n=new P,r=t.documentElement||{},i=t.body||{};return typeof e.pageXOffset==T?(n.x=e.pageXOffset,n.y=e.pageYOffset):i.scrollLeft||i.scrollTop?(n.x=i.scrollLeft,n.y=i.scrollTop):(r.scrollLeft||r.scrollTop)&&(n.x=r.scrollLeft,n.y=r.scrollTop),n},a.getWindowSize=function(){var n=new P,r=t.documentElement||{},i=t.body||{};return typeof e.innerWidth==T?(n.x=e.innerWidth,n.y=e.innerHeight):r.clientWidth||r.clientHeight?(n.x=r.clientWidth,n.y=r.clientHeight):i.clientWidth||i.clientHeight?(n.x=i.clientWidth,n.y=i.clientHeight):A.fail("Unknown window size, no known technique."),n},a.imageFormatSupported=function(e){var e=e?e:b;return!!l[e.toLowerCase()]},a.makeCenteredNode=function(e){var t="border:none; margin:0px; padding:0px;",e=N.getElement(e),n=o.makeNeutralElement(v),r=[];r.push('<div style="display:table; height:100%; width:100%;'),r.push(t),r.push('#position:relative; overflow:hidden; text-align:left;">'),r.push('<div style="#position:absolute; #top:50%; width:100%; '),r.push(t),r.push('display:table-cell; vertical-align:middle;">'),r.push('<div style="#position:relative; #top:-50%; width:100%; '),r.push(t),r.push('text-align:center;"></div></div></div>'),n.innerHTML=r.join(b),n=n.firstChild;for(var i=n,a=n.getElementsByTagName(v);a.length>0;)i=a[0],a=i.getElementsByTagName(v);return i.appendChild(e),n},a.makeNeutralElement=function(e){var n=t.createElement(e),r=n.style;return r.background="transparent none",r.border=m,r.margin=h,r.padding=h,r.position="static",n},a.makeTransparentImage=function(e){var t=o.makeNeutralElement("img"),n=S;return u==$.IE&&7>x?(n=o.makeNeutralElement(g),n.style.display=f,t.onload=function(){n.style.width=n.style.width||t.width+p,n.style.height=n.style.height||t.height+p,t.onload=S,t=S},t.src=e,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')"):(n=t,n.src=e),n},a.setElementOpacity=function(e,t,r){var e=o.getElement(e);r&&I&&(t=n.round(t)),e.style.opacity=1>t?t:b;var i=e.style.filter||b;if(e.style.filter=i.replace(/[\s]*alpha\(.*?\)[\s]*/g,b),!(t>=1)){var a=n.round(100*t),s=" alpha(opacity="+a+") ";e.style.filter+=s}},a.addEvent=function(e,t,n,r){var e=o.getElement(e);e.addEventListener?(t==d&&e.addEventListener(i,n,r),e.addEventListener(t,n,r)):e.attachEvent?(e.attachEvent("on"+t,n),r&&e.setCapture&&e.setCapture()):A.fail("Unable to attach event handler, no known technique.")},a.removeEvent=function(e,t,n,r){var e=o.getElement(e);e.removeEventListener?(t==d&&e.removeEventListener(i,n,r),e.removeEventListener(t,n,r)):e.detachEvent?(e.detachEvent("on"+t,n),r&&e.releaseCapture&&e.releaseCapture()):A.fail("Unable to detach event handler, no known technique.")},a.cancelEvent=function(e){var e=o.getEvent(e);e.preventDefault&&e.preventDefault(),e.cancel=C,e.returnValue=O},a.stopEvent=function(e){var e=o.getEvent(e);e.stopPropagation&&e.stopPropagation(),e.cancelBubble=C},a.createCallback=function(e,t){for(var n=[],r=2;arguments.length>r;r++)n.push(arguments[r]);return function(){for(var r=n.concat([]),i=0;arguments.length>i;i++)r.push(arguments[i]);return t.apply(e,r)}},a.getUrlParameter=function(e){var t=k[e];return t?t:S},a.makeAjaxRequest=function(t,n){var r=typeof n==c,i=S;if(r)var a=n,n=function(){e.setTimeout(N.createCallback(S,a,i),1)};if(e.ActiveXObject)for(var o=0;s.length>o;o++)try{i=new ActiveXObject(s[o]);break}catch(l){continue}else e.XMLHttpRequest&&(i=new XMLHttpRequest);!i&&A.fail("Browser doesn't support XMLHttpRequest."),H.proxyUrl&&(t=H.proxyUrl+t),r&&(i.onreadystatechange=function(){4==i.readyState&&(i.onreadystatechange=Function(),n())});try{i.open("GET",t,r),i.send(S)}catch(l){A.log(l.name+" while making AJAX request: "+l.message),i.onreadystatechange=S,i=S,r&&n()}return r?S:i},a.parseXml=function(t){var n=S;if(e.ActiveXObject)try{n=new ActiveXObject("Microsoft.XMLDOM"),n.async=O,n.loadXML(t)}catch(r){A.log(r.name+" while parsing XML (ActiveX): "+r.message)}else if(e.DOMParser)try{var i=new DOMParser;n=i.parseFromString(t,"text/xml")}catch(r){A.log(r.name+" while parsing XML (DOMParser): "+r.message)}else A.fail("Browser doesn't support XML DOM.");return n}};N=k.Utils=new N;var F=k.MouseTracker;(function(){function r(e){return N.getMousePosition(e)}function i(e,t){var n=N.getMousePosition(e),r=N.getElementPosition(t);return n.minus(r)}function a(e,n){for(var r=t.body;n&&e!=n&&r!=n;)try{n=n.parentNode}catch(i){return O}return e==n}function o(){f=C}function s(){f=O}var l="mouseup",u="mousedown";if(!F){var p=N.getBrowser()==$.IE&&9>N.getBrowserVersion(),f=O,g=O,h={},m=[];(function(){p?(N.addEvent(t,u,o,O),N.addEvent(t,l,s,O)):(N.addEvent(e,u,o,C),N.addEvent(e,l,s,C))})(),F=k.MouseTracker=function(o){function s(){q||(N.addEvent(o,j,b,O),N.addEvent(o,D,E,O),N.addEvent(o,u,I,O),N.addEvent(o,l,k,O),N.addEvent(o,d,F,O),N.addEvent(o,"click",P,O),q=C,h[X]=V)}function v(){q&&(N.removeEvent(o,j,b,O),N.removeEvent(o,D,E,O),N.removeEvent(o,u,I,O),N.removeEvent(o,l,k,O),N.removeEvent(o,d,F,O),N.removeEvent(o,"click",P,O),w(),q=O,delete h[X])}function y(){Z||(p?(N.removeEvent(o,l,k,O),N.addEvent(o,l,L,C),N.addEvent(o,z,$,C)):(N.addEvent(e,l,M,C),N.addEvent(e,z,R,C)),Z=C)}function w(){Z&&(p?(N.removeEvent(o,z,$,C),N.removeEvent(o,l,L,C),N.addEvent(o,l,k,O)):(N.removeEvent(e,z,R,C),N.removeEvent(e,l,M,C)),Z=O)}function x(e,t){var n=h;for(var r in n)n.hasOwnProperty(r)&&X!=r&&n[r][e](t)}function T(){return G}function b(e){var e=N.getEvent(e);p&&Z&&!a(e.srcElement,o)&&x("onMouseOver",e);var t=e.target?e.target:e.srcElement,n=e.relatedTarget?e.relatedTarget:e.fromElement;if(a(o,t)&&!a(o,n)&&(G=C,typeof _.enterHandler==c))try{_.enterHandler(_,i(e,o),W,f)}catch(r){A.error(r.name+" while executing enter handler: "+r.message,r)}}function E(e){var e=N.getEvent(e);p&&Z&&!a(e.srcElement,o)&&x("onMouseOut",e);var t=e.target?e.target:e.srcElement,n=e.relatedTarget?e.relatedTarget:e.toElement;if(a(o,t)&&!a(o,n)&&(G=O,typeof _.exitHandler==c))try{_.exitHandler(_,i(e,o),W,f)}catch(r){A.error(r.name+" while executing exit handler: "+r.message,r)}}function I(e){var e=N.getEvent(e);if(2!=e.button){if(W=C,Q=r(e),J=Q,K=(new Date).getTime(),typeof _.pressHandler==c)try{_.pressHandler(_,i(e,o))}catch(t){A.error(t.name+" while executing press handler: "+t.message,t)}(_.pressHandler||_.dragHandler)&&N.cancelEvent(e),p&&g?p&&m.push(V):(y(),g=C,m=[V])}}function k(e){var e=N.getEvent(e),t=W,n=G;if(2!=e.button){if(W=O,typeof _.releaseHandler==c)try{_.releaseHandler(_,i(e,o),t,n)}catch(r){A.error(r.name+" while executing release handler: "+r.message,r)}t&&n&&B(e)}}function L(e){var e=N.getEvent(e);if(2!=e.button){for(var n=0;m.length>n;n++){var r=m[n];!r.hasMouse()&&r.onMouseUp(e)}w(),g=O,e.srcElement.fireEvent("on"+e.type,t.createEventObject(e)),N.stopEvent(e)}}function M(e){!G&&k(e),w()}function P(e){_.clickHandler&&N.cancelEvent(e)}function B(e){var e=N.getEvent(e);if(2!=e.button){var t=(new Date).getTime()-K,n=r(e),a=J.distanceTo(n),s=H.clickTimeThreshold>=t&&H.clickDistThreshold>=a;if(typeof _.clickHandler==c)try{_.clickHandler(_,i(e,o),s,e.shiftKey)}catch(l){A.error(l.name+" while executing click handler: "+l.message,l)}}}function R(e){var e=N.getEvent(e),t=r(e),n=t.minus(Q);if(Q=t,typeof _.dragHandler==c){try{_.dragHandler(_,i(e,o),n,e.shiftKey)}catch(a){A.error(a.name+" while executing drag handler: "+a.message,a)}N.cancelEvent(e)}}function $(e){for(var t=0;m.length>t;t++)m[t].onMouseMove(e);N.stopEvent(e)}function F(e){var e=N.getEvent(e),t=N.getMouseScroll(e);if(typeof _.scrollHandler==c){if(t)try{_.scrollHandler(_,i(e,o),t,e.shiftKey)}catch(n){A.error(n.name+" while executing scroll handler: "+n.message,n)}N.cancelEvent(e)}}var z="mousemove",D="mouseout",j="mouseover",U=this,_=U,V=S,X=n.random(),o=N.getElement(o),q=O,Z=O,W=O,G=O,Q=S,K=S,J=S;U.target=o,U.enterHandler=S,U.exitHandler=S,U.pressHandler=S,U.releaseHandler=S,U.clickHandler=S,U.dragHandler=S,U.scrollHandler=S,function(){V={hasMouse:T,onMouseOver:b,onMouseOut:E,onMouseUp:k,onMouseMove:R}}(),U.isTracking=function(){return q},U.setTracking=function(e){e?s():v()}}}})();var z,D=k.EventManager=function(){var t=this,n={};t.addListener=function(e,t){typeof t==c&&(n[e]||(n[e]=[]),n[e].push(t))},t.removeListener=function(e,t){var r=n[e];if(typeof t==c&&r)for(var i=0;r.length>i;i++)if(t==r[i])return r.splice(i,1),void 0},t.clearListeners=function(e){n[e]&&delete n[e]},t.trigger=function(t){var r=n[t],i=[];if(r){for(var a=1;arguments.length>a;a++)i.push(arguments[a]);for(var a=0;r.length>a;a++)try{r[a].apply(e,i)}catch(o){A.error(o.name+u+t+" handler: "+o.message,o)}}}};(function(){function t(t,r){function i(n){a.onload=S,a.onabort=S,a.onerror=S,o&&e.clearTimeout(o),e.setTimeout(function(){r(t,n?a:S)},1)}var a=S,o=S;this.start=function(){a=new Image;var r=function(){i(C)},s=function(){i(O)},l=function(){A.log("Image timed out: "+t),i(O)};a.onload=r,a.onabort=s,a.onerror=s,o=e.setTimeout(l,n),a.src=t}}var n=15e3;z=k.ImageLoader=function(){function e(e,t,r){if(n--,typeof e==c)try{e(r)}catch(i){A.error(i.name+u+t+" callback: "+i.message,i)}}var n=0;this.loadImage=function(r,i){if(n>=H.imageLoaderLimit)return O;var a=N.createCallback(S,e,i),o=new t(r,a);return n++,o.start(),C}}})();var j,U;(function(){var t={REST:0,GROUP:1,HOVER:2,DOWN:3};j=k.Button=function(r,i,a,u,d,p,m,v,y,w){function x(){e.setTimeout(T,20)}function T(){if(W){var e=(new Date).getTime(),t=e-Z,r=1-t/q;r=n.min(1,r),r=n.max(0,r),N.setElementOpacity(U,r,C),r>0&&x()}}function E(){W=C,Z=(new Date).getTime()+X,e.setTimeout(x,X)}function I(){W=O,N.setElementOpacity(U,1,C)}function k(e){e>=t.GROUP&&z==t.REST&&(I(),z=t.GROUP),e>=t.HOVER&&z==t.GROUP&&(_.style.visibility=b,z=t.HOVER),e>=t.DOWN&&z==t.HOVER&&(V.style.visibility=b,z=t.DOWN)}function H(e){t.HOVER>=e&&z==t.DOWN&&(V.style.visibility=l,z=t.HOVER),t.GROUP>=e&&z==t.HOVER&&(_.style.visibility=l,z=t.GROUP),t.REST>=e&&z==t.GROUP&&(E(),z=t.REST)}function L(e,n,r,i){r?(k(t.DOWN),y&&y()):!i&&k(t.HOVER)}function A(e,n,r){H(t.GROUP),r&&w&&w()}function M(){k(t.DOWN),p&&p()}function P(e,n,r,i){r&&i?(H(t.HOVER),m&&m()):r?H(t.GROUP):k(t.HOVER)}function B(e,t,n){v&&n&&v()}var R=N.makeNeutralElement(g),z=t.GROUP,D=new F(R),j=N.makeTransparentImage(i),U=N.makeTransparentImage(a),_=N.makeTransparentImage(u),V=N.makeTransparentImage(d),p=typeof p==c?p:S,m=typeof m==c?m:S,v=typeof v==c?v:S,y=typeof y==c?y:S,w=typeof w==c?w:S,X=0,q=2e3,Z=S,W=O;this.elmt=R,this.notifyGroupEnter=function(){k(t.GROUP)},this.notifyGroupExit=function(){H(t.REST)},function(){R.style.display=f,R.style.position=s,R.title=r,R.appendChild(j),R.appendChild(U),R.appendChild(_),R.appendChild(V);var e=(j.style,U.style),n=_.style,i=V.style;e.position=n.position=i.position=o,e.top=n.top=i.top=h,e.left=n.left=i.left=h,n.visibility=i.visibility=l,N.getBrowser()==$.FIREFOX&&3>N.getBrowserVersion()&&(e.top=n.top=i.top=b),D.enterHandler=L,D.exitHandler=A,D.pressHandler=M,D.releaseHandler=P,D.clickHandler=B,D.setTracking(C),H(t.REST)}()},U=k.ButtonGroup=function(e){function t(){for(var t=0;e.length>t;t++)e[t].notifyGroupEnter()}function n(t,n,r){if(!r)for(var i=0;e.length>i;i++)e[i].notifyGroupExit()}function r(t,n,r,i){if(!i)for(var a=0;e.length>a;a++)e[a].notifyGroupExit()}var i=N.makeNeutralElement(g),e=e.concat([]),a=new F(i);this.elmt=i,this.emulateEnter=function(){t()},this.emulateExit=function(){n()},function(){i.style.display=f;for(var o=0;e.length>o;o++)i.appendChild(e[o].elmt);a.enterHandler=t,a.exitHandler=n,a.releaseHandler=r,a.setTracking(C)}()}})();var _=k.TileSource=function(e,t,r,i,a,o){var s=this,l=s,u=t/e;s.width=e,s.height=t,s.aspectRatio=e/t,s.dimensions=new P(e,t),s.minLevel=a?a:0,s.maxLevel=o?o:n.ceil(n.log(n.max(e,t))/n.log(2)),s.tileSize=r?r:0,s.tileOverlap=i?i:0,s.getLevelScale=function(e){return 1/(1<<l.maxLevel-e)},s.getNumTiles=function(r){var i=l.getLevelScale(r),a=n.ceil(i*e/l.tileSize),o=n.ceil(i*t/l.tileSize);return new P(a,o)},s.getPixelRatio=function(e){var t=l.dimensions.times(l.getLevelScale(e)),n=1/t.x,r=1/t.y;return new P(n,r)},s.getTileAtPoint=function(e,t){var r,i,a=l.dimensions.times(l.getLevelScale(e)),o=t.times(a.x);return r=t.x>=0&&1>=t.x?n.floor(o.x/l.tileSize):n.ceil(a.x/l.tileSize)*n.floor(o.x/a.x)+n.floor((a.x+o.x%a.x)%a.x/l.tileSize),i=t.y>=0&&u>=t.y?n.floor(o.y/l.tileSize):n.ceil(a.y/l.tileSize)*n.floor(o.y/a.y)+n.floor((a.y+o.y%a.y)%a.y/l.tileSize),new P(r,i)},s.getTileBounds=function(e,t,r){var i=l.dimensions.times(l.getLevelScale(e)),a=0===t?0:l.tileSize*t-l.tileOverlap,o=0===r?0:l.tileSize*r-l.tileOverlap,s=l.tileSize+(0===t?1:2)*l.tileOverlap,u=l.tileSize+(0===r?1:2)*l.tileOverlap;s=n.min(s,i.x-a),u=n.min(u,i.y-o);var c=1/i.x;return new B(a*c,o*c,s*c,u*c)},s.getTileUrl=function(){throw Error("Method not implemented.")},s.tileExists=function(e,t,n){var r=l.getNumTiles(e);return e>=l.minLevel&&l.maxLevel>=e&&t>=0&&n>=0&&r.x>t&&r.y>n}},V=k.DisplayRect=function(e,t,n,r,i,a){B.apply(this,arguments),this.minLevel=i,this.maxLevel=a};V.prototype=new B;var X=k.DziTileSource=function(e,t,r,i,a,o,s){var l=this;_.apply(l,[e,t,r,i]);var u=l,c={};l.fileFormat=o,l.tileFormat=o,l.displayRects=s,function(){if(s)for(var e=s.length-1;e>=0;e--)for(var t=s[e],n=t.minLevel;t.maxLevel>=n;n++)c[n]||(c[n]=[]),c[n].push(t)}(),l.getTileUrl=function(e,t,n){return[a,e,"/",t,"_",n,".",o].join(b)},l.tileExists=function(e,t,i){var a=c[e];if(!a||!a.length)return C;for(var o=u.getLevelScale(e),s=a.length-1;s>=0;s--){var l=a[s];if(!(l.minLevel>e||e>l.maxLevel)){var d=l.x*o,p=l.y*o,f=d+l.width*o,g=p+l.height*o;if(d=n.floor(d/r),p=n.floor(p/r),f=n.ceil(f/r),g=n.ceil(g/r),t>=d&&f>t&&i>=p&&g>i)return C}}return O}};X.prototype=new _,function(){function t(e){Error.apply(this,arguments),this.message=e}function n(e){return e instanceof t||(A.error(e.name+" while creating DZI from XML: "+e.message),e=new t(L.getString("Errors.Unknown"))),e}function r(e){var t=e.split("/"),n=t[t.length-1],r=n.lastIndexOf(".");return r>-1&&(t[t.length-1]=n.slice(0,r)),t.join("/")+"_files/"}function i(e,n){if(!e)throw new t(L.getString("Errors.Security"));if(200!==e.status&&0!==e.status){var r=e.status,i=404==r?"Not Found":e.statusText;throw new t(L.getString("Errors.Status",r,i))}var a=S;return e.responseXML&&e.responseXML.documentElement?a=e.responseXML:e.responseText&&(a=N.parseXml(e.responseText)),o(a,n)}function o(e,n){var r="Errors.Dzi";if(!e||!e.documentElement)throw new t(L.getString("Errors.Xml"));var i=e.documentElement,a=i.tagName;if("Image"==a)try{return s(i,n)}catch(o){var u=L.getString(r);throw o instanceof t?o:new t(u)}else{if("Collection"==a)throw new t(L.getString("Errors.Dzc"));if("Error"==a)return l(i)}throw new t(L.getString(r))}function s(e,n){var r=e.getAttribute("Format");if(!N.imageFormatSupported(r))throw new t(L.getString("Errors.ImageFormat",r.toUpperCase()));for(var i=e.getElementsByTagName("Size")[0],o=e.getElementsByTagName("DisplayRect"),s=parseInt(i.getAttribute("Width"),a),l=parseInt(i.getAttribute("Height"),a),u=parseInt(e.getAttribute("TileSize")),c=parseInt(e.getAttribute("Overlap")),d=[],p=0;o.length>p;p++){var f=o[p],g=f.getElementsByTagName("Rect")[0];d.push(new V(parseInt(g.getAttribute("X"),a),parseInt(g.getAttribute("Y"),a),parseInt(g.getAttribute("Width"),a),parseInt(g.getAttribute("Height"),a),parseInt(f.getAttribute("MinLevel"),a),parseInt(f.getAttribute("MaxLevel"),a)))}return new X(s,l,u,c,n,r,d)}function l(e){var n=e.getElementsByTagName("Message")[0],r=n.firstChild.nodeValue;throw new t(r)}var u="Errors.Empty";t.prototype=Error(),X.getTilesUrl=r,X.createFromJson=function(i,a){var o,s,l=typeof a==c,d=i;if(d&&(d.url||d.tilesUrl))try{var p=d.displayRects;if(p&&p.length)for(var f=0,g=p.length;g>f;f++){var h=p[f];p[f]=new V(h.x||h[0],h.y||h[1],h.width||h[2],h.height||h[3],h.minLevel||h[4],h.maxLevel||h[5])}o=new X(d.width,d.height,d.tileSize,d.tileOverlap,d.tilesUrl||r(d.url),d.tileFormat,d.displayRects),o.xmlUrl=d.url}catch(m){s=n(m)}else s=new t(L.getString(u));if(!l){if(s)throw s;return o}e.setTimeout(N.createCallback(S,a,o,s&&s.message),1)},X.createFromXml=function(a,s,l){function d(e,t){try{var r=e(t,g);return r.xmlUrl=a,r}catch(i){if(p)return f=n(i).message,S;throw n(i)}}var p=typeof l==c,f=S;if(!a){if(f=L.getString(u),p)return e.setTimeout(function(){l(S,f)},1),S;throw new t(f)}var g=r(a);return p?(s?e.setTimeout(function(){var e=d(o,N.parseXml(s));l(e,f)},1):N.makeAjaxRequest(a,function(e){var t=d(i,e);l(t,f)}),S):s?d(o,N.parseXml(s)):d(i,N.makeAjaxRequest(a))}}();var q,Z,W=k.Viewport=function(e,t){function r(){c.goHome(C),c.update()}function i(e){return n.log(e)/w}function a(e){return n.pow(2,e)}function o(e,t,r){return n.min(n.max(e,t),r)}function s(e,t){var n=e.x,r=e.y,i=o(n,t.x,t.x+t.width),a=o(r,t.y,t.y+t.height);return n===i&&r===a?e:new P(i,a)}function l(e){var t=c.getZoom(e),n=1/t,r=n/c.getAspectRatio(),i=H.visibilityRatio,a=(i-I)*n,o=(i-I)*r,s=1-2*a,l=p-2*o;return 0>s&&(a+=I*s,s=0),0>l&&(o+=I*l,l=0),new k.Rect(a,o,s,l)}var u=this,c=u,e=new P(e.x,e.y),d=t.x/t.y,p=t.y/t.x,f=new R(0),g=new R(0),h=new R(H.logarithmicZoom?0:1),m=S,v=new B(0,0,1,p),y=v.getCenter(),w=n.LN2;u.getHomeBounds=function(){var e=c.getAspectRatio(),t=new B(v.x,v.y,v.width,v.height);return d>=e?(t.height=v.width/e,t.y=y.y-t.height/2):(t.width=v.height*e,t.x=y.x-t.width/2),t},u.getHomeCenter=function(){return y},u.getHomeZoom=function(){var e=d/c.getAspectRatio();
return e>=1?1:e},u.getMinCenter=function(e){return l(e).getTopLeft()},u.getMaxCenter=function(e){return l(e).getBottomRight()},u.getMinZoom=function(){var r=c.getHomeZoom();if(H.minZoomDimension)var i=t.x<=t.y?H.minZoomDimension/e.x:H.minZoomDimension/(e.x*p);else var i=H.minZoomImageRatio*r;return n.min(i,r)},u.getMaxZoom=function(){var r=t.x*H.maxZoomPixelRatio/e.x;return n.max(r,c.getHomeZoom())},u.getAspectRatio=function(){return e.x/e.y},u.getContainerSize=function(){return new P(e.x,e.y)},u.getBounds=function(e){var t=c.getCenter(e),n=1/c.getZoom(e),r=n/c.getAspectRatio();return new B(t.x-n/2,t.y-r/2,n,r)},u.getCenter=function(t){var n=new P(f.getCurrent(),g.getCurrent()),r=new P(f.getTarget(),g.getTarget());if(t)return n;if(!m)return r;var i=c.getZoom(),a=1/i,o=a/c.getAspectRatio(),s=new B(n.x-a/2,n.y-o/2,a,o),l=c.pixelFromPoint(m,C),u=m.minus(s.getTopLeft()).times(e.x/s.width),d=u.minus(l),p=d.divide(e.x*i);return r.plus(p)},u.getZoom=function(e){var t;return e?(t=h.getCurrent(),H.logarithmicZoom?a(t):t):(t=h.getTarget(),H.logarithmicZoom?a(t):t)},u.applyConstraints=function(e){var t=c.getZoom(),n=o(t,c.getMinZoom(),c.getMaxZoom());t!=n&&c.zoomTo(n,m,e);var r=c.getCenter(),i=s(r,l());if(H.wrapHorizontal&&(i.x=r.x),H.wrapVertical&&(i.y=r.y),!r.equals(i)){var a=1/n,u=a/c.getAspectRatio();c.fitBounds(new B(i.x-I*a,i.y-I*u,a,u),e)}},u.ensureVisible=function(e){c.applyConstraints(e)},u.fitBounds=function(t,n){var r=c.getAspectRatio(),i=t.getCenter(),a=new B(t.x,t.y,t.width,t.height);a.getAspectRatio()>=r?(a.height=t.width/r,a.y=i.y-a.height/2):(a.width=t.height*r,a.x=i.x-a.width/2),c.panTo(c.getCenter(C),C),c.zoomTo(c.getZoom(C),S,C);var o=c.getBounds(),s=c.getZoom(),l=1/a.width;if(l==s||a.width==o.width)return c.panTo(i,n),void 0;var u=o.getTopLeft().times(e.x/o.width).minus(a.getTopLeft().times(e.x/a.width)).divide(e.x/o.width-e.x/a.width);c.zoomTo(l,u,n)},u.goHome=function(e){var t=c.getCenter();H.wrapHorizontal&&(t.x=(1+t.x%1)%1,f.resetTo(t.x),f.update()),H.wrapVertical&&(t.y=(p+t.y%p)%p,g.resetTo(t.y),g.update()),c.fitBounds(v,e)},u.panBy=function(e,t){c.panTo(c.getCenter().plus(e),t)},u.panTo=function(t,n){if(n)return f.resetTo(t.x),g.resetTo(t.y),void 0;if(!m)return f.springTo(t.x),g.springTo(t.y),void 0;var r=c.getZoom(),i=1/r,a=i/c.getAspectRatio(),o=new B(f.getCurrent()-i/2,g.getCurrent()-a/2,i,a),s=c.pixelFromPoint(m,C),l=m.minus(o.getTopLeft()).times(e.x/o.width),u=l.minus(s),d=u.divide(e.x*r),p=t.minus(d);f.springTo(p.x),g.springTo(p.y)},u.zoomBy=function(e,t,n){c.zoomTo(c.getZoom()*e,t,n)},u.zoomTo=function(e,t,n){n?h.resetTo(H.logarithmicZoom?i(e):e):h.springTo(H.logarithmicZoom?i(e):e),m=t instanceof P?t:S},u.resize=function(t,n){var r=c.getBounds(),i=r,a=t.x/e.x;e=new P(t.x,t.y),n&&(i.width=r.width*a,i.height=i.width/c.getAspectRatio()),c.fitBounds(i,C)},u.update=function(){var e=f.getCurrent(),t=g.getCurrent(),n=h.getCurrent();if(m)var r=c.pixelFromPoint(m,C);if(h.update(),m&&h.getCurrent()!=n){var i=c.pixelFromPoint(m,C),a=i.minus(r),o=c.deltaPointsFromPixels(a,C);f.shiftBy(o.x),g.shiftBy(o.y)}else m=S;return f.update(),g.update(),f.getCurrent()!=e||g.getCurrent()!=t||h.getCurrent()!=n},u.deltaPixelsFromPoints=function(t,n){return t.times(e.x*c.getZoom(n))},u.deltaPointsFromPixels=function(t,n){return t.divide(e.x*c.getZoom(n))},u.pixelFromPoint=function(t,n){var r=c.getBounds(n);return t.minus(r.getTopLeft()).times(e.x/r.width)},u.pointFromPixel=function(t,n){var r=c.getBounds(n);return t.divide(e.x/r.width).plus(r.getTopLeft())},r()};(function(){function e(e,t,n,r,i,a){var o=this;o.level=e,o.x=t,o.y=n,o.bounds=r,o.exists=i,o.url=a,o.elmt=S,o.image=S,o.loaded=O,o.loading=O,o.style=S,o.position=S,o.size=S,o.blendStart=S,o.opacity=S,o.distance=S,o.visibility=S,o.beingDrawn=O,o.lastDrawnTime=0,o.lastTouchTime=0}function a(e){switch(e){case Z.TOP_LEFT:return function(){};case Z.TOP:return function(e,t){e.x-=t.x/2};case Z.TOP_RIGHT:return function(e,t){e.x-=t.x};case Z.RIGHT:return function(e,t){e.x-=t.x,e.y-=t.y/2};case Z.BOTTOM_RIGHT:return function(e,t){e.x-=t.x,e.y-=t.y};case Z.BOTTOM:return function(e,t){e.x-=t.x/2,e.y-=t.y};case Z.BOTTOM_LEFT:return function(e,t){e.y-=t.y};case Z.LEFT:return function(e,t){e.y-=t.y/2};case Z.CENTER:default:return function(e,t){e.x-=t.x/2,e.y-=t.y/2}}}function s(e,t,n){var r=this;r.elmt=e,r.scales=t instanceof B,r.bounds=new B(t.x,t.y,t.width,t.height),r.adjust=a(t instanceof P?n:Z.TOP_LEFT),r.position=new P(t.x,t.y),r.size=new P(t.width,t.height),r.style=e.style,r.naturalSize=new P(e.clientWidth,e.clientHeight)}for(var l,u,c="progid:DXImageTransform.Microsoft.Matrix(",d=" when it's not yet loaded.",f="Attempting to draw tile ",g=100,h=I,m=N.getBrowser(),y=N.getBrowserVersion(),T=(navigator.userAgent,!!t.createElement("canvas").getContext),E=t.documentElement||{},L=E.style||{},R=O,F=["msTransform","WebkitTransform","MozTransform"];l=F.shift();)if(typeof L[l]!==w){R=C,u=/webkit/i.test(l);break}var D="WebkitTransition",j=(typeof L[D]!==w,"progid:DXImageTransform.Microsoft.Matrix"),U=(RegExp(j+"\\(.*?\\)","g"),function(){try{return m==$.IE&&!!t.documentElement.filters}catch(e){return O}}(),m==$.SAFARI&&4>y||m==$.CHROME),_=T&&!U,V=!_&&R,X=O,W=typeof t.documentMode!==w?"bicubic":"nearest-neighbor";e.prototype.toString=function(){return this.level+"/"+this.x+"_"+this.y},e.prototype.drawHTML=function(e){var t=this;if(!t.loaded)return A.error(f+(""+t)+d),void 0;t.elmt||(t.elmt=N.makeNeutralElement("img"),t.elmt.src=t.url,t.style=t.elmt.style,t.style.position=o,t.style.msInterpolationMode=W,V&&(t.style[l+"Origin"]="0px 0px"));var r=t.elmt,i=t.image,a=t.style,s=t.position,g=t.size;if(r.parentNode!=e&&e.appendChild(r),V)a[l]=["matrix(",(g.x/i.width).toFixed(8),",0,0,",(g.y/i.height).toFixed(8),x,s.x.toFixed(8),u?x:"px,",s.y.toFixed(8),u?")":"px)"].join(b);else if(X){var h=e.clientWidth,m=e.clientHeight;a.width=h+p,a.height=m+p,a.filter=[c,"M11=",(g.x/h).toFixed(8),",M22=",(g.y/m).toFixed(8),",Dx=",s.x.toFixed(8),",Dy=",s.y.toFixed(8),")"].join(b)}else s=s.apply(n.floor),g=g.apply(n.ceil),a.left=s.x+p,a.top=s.y+p,a.width=g.x+p,a.height=g.y+p;N.setElementOpacity(r,t.opacity)},e.prototype.drawCanvas=function(e){var t=this;if(!t.loaded)return A.error(f+(""+t)+d),void 0;var n=t.position,r=t.size;e.globalAlpha=t.opacity,e.drawImage(t.image,n.x,n.y,r.x,r.y)},e.prototype.unload=function(){var e=this;e.elmt&&e.elmt.parentNode&&e.elmt.parentNode.removeChild(e.elmt),e.elmt=S,e.image=S,e.loaded=O,e.loading=O},Z=k.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},s.prototype.destroy=function(){var e=this.elmt,t=this.style;e.parentNode&&e.parentNode.removeChild(e),t.top=b,t.left=b,t.position=b,this.scales&&(t.width=b,t.height=b)},s.prototype.drawHTML=function(e){var t=this,r=t.elmt,a=t.style,s=t.scales,u=t.naturalSize;r.parentNode!=e&&(e.appendChild(r),a.position=o,u.x=r.clientWidth,u.y=r.clientHeight);var d=t.position,f=t.size;if(s||(f.x=u.x=u.x||r.clientWidth,f.y=u.y=u.y||r.clientHeight),t.adjust(d,f),H.transformOverlays&&R)a[l+"Origin"]="0px 0px",a[l]=["translate(",d.x.toFixed(8),"px,",d.y.toFixed(8),"px)"].join(b),s&&(r.clientWidth||(a.width=i),r.clientHeight||(a.height=i),a[l]+=[" scale(",(f.x/r.clientWidth).toFixed(8),x,(f.y/r.clientHeight).toFixed(8),")"].join(b));else if(H.transformOverlays&&X){var g=e.clientWidth,h=e.clientHeight;a.width=g+p,a.height=h+p,a.filter=[c,"M11=",(f.x/g).toFixed(8),",M22=",(f.y/h).toFixed(8),",Dx=",d.x.toFixed(8),",Dy=",d.y.toFixed(8),")"].join(b)}else d=d.apply(n.floor),f=f.apply(n.ceil),a.left=d.x+p,a.top=d.y+p,s&&(a.width=f.x+p,a.height=f.y+p)},s.prototype.update=function(e,t){this.scales=e instanceof B,this.bounds=new B(e.x,e.y,e.width,e.height),this.adjust=a(e instanceof P?t:Z.TOP_LEFT)},q=k.Drawer=function(t,a,l){function u(e){return Q[e]||(Q[e]=t.getNumTiles(e)),Q[e]}function c(e){return K[e]||(K[e]=t.getPixelRatio(e)),K[e]}function d(n,r,i,a,o,s){if(J[n]||(J[n]={}),J[n][r]||(J[n][r]={}),!J[n][r][i]){var l=(o+r%o)%o,u=(s+i%s)%s,c=t.getTileBounds(n,l,u),d=t.tileExists(n,l,u),p=t.getTileUrl(n,l,u);c.x+=1*(r-l)/o,c.y+=G*(i-u)/s,J[n][r][i]=new e(n,r,i,c,d,p)}var f=J[n][r][i];return f.lastTouchTime=a,f}function p(e,t){e.loading=U.loadImage(e.url,N.createCallback(S,f,e,t))}function f(e,t,r){if(e.loading=O,at)return A.error("Tile load callback in middle of drawing routine."),void 0;if(!r)return A.log("Tile "+e+" failed to load: "+e.url),e.exists=O,void 0;if(it>t)return A.log("Ignoring tile "+e+" loaded before reset: "+e.url),void 0;e.loaded=C,e.image=r;var i=Y.length;if(Y.length>=g){for(var a=n.ceil(n.log(Z)/n.log(2)),o=S,s=-1,l=Y.length-1;l>=0;l--){var u=Y[l];if(!(a>=u.level||u.beingDrawn))if(o){var c=u.lastTouchTime,d=o.lastTouchTime,p=u.level,f=o.level;(d>c||c==d&&p>f)&&(o=u,s=l)}else o=u,s=l}o&&s>=0&&(o.unload(),i=s)}Y[i]=e,ot=C}function y(){J={},Y=[]}function w(e,t,n){if(!et[e])return O;if(t===r||n===r){var i=et[e];for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];for(var s in o)if(o.hasOwnProperty(s)&&!o[s])return O}return C}return et[e][t]===r||et[e][t][n]===r||et[e][t][n]===C}function x(e,t,n){return t===r||n===r?w(e+1):w(e+1,2*t,2*n)&&w(e+1,2*t,2*n+1)&&w(e+1,2*t+1,2*n)&&w(e+1,2*t+1,2*n+1)}function T(e,t,n,r){return et[e]?(et[e][t]||(et[e][t]={}),et[e][t][n]=r,void 0):(A.error("Setting coverage for a tile before its level's coverage has been reset: "+e),void 0)}function E(e){et[e]={}}function k(e,t){return e?t.visibility>e.visibility?t:t.visibility==e.visibility&&t.distance<e.distance?t:e:t}function L(e){for(var t=tt.length-1;t>=0;t--)if(tt[t].elmt==e)return t;return-1}function B(){ot=O;for(var e=D,r=j,i=_,o=nt;o.length>0;){var s=o.pop();s.beingDrawn=O}var l=a.getContainerSize(),f=l.x,g=l.y;i?(e.width=f,e.height=g,r.clearRect(0,0,f,g)):e.innerHTML=b;var v=a.getBounds(C),y=v.getTopLeft(),L=v.getBottomRight();if(!(!H.wrapHorizontal&&(0>L.x||y.x>1)||!H.wrapVertical&&(0>L.y||y.y>G))){var A=u,M=c,B=d,R=x,N=T,z=E,U=w,V=W,Z=rt,Q=m===$.CHROME,K=n.abs,J=(n.ceil,n.floor),Y=n.log,et=n.max,it=n.min,at=a.deltaPixelsFromPoints,st=a.pixelFromPoint,lt=t.getTileAtPoint,ut=H.alwaysBlend,ct=1e3*H.blendTime,dt=H.immediateRender,pt=H.minZoomDimension,ft=(H.minImageRatio,H.wrapHorizontal),gt=H.wrapVertical,ht=H.wrapOverlays;ft||(y.x=et(y.x,0),L.x=it(L.x,1)),gt||(y.y=et(y.y,0),L.y=it(L.y,G));var mt=S,vt=O,yt=(new Date).getTime(),wt=a.getCenter(),xt=st(wt),Tt=at(M(0),O).x,bt=dt?1:Tt;pt=pt||64;var Et=et(X,J(Y(pt)/Y(2))),St=at(M(0),C).x,Ct=it(q,J(Y(St/h)/Y(2)));Et=it(Et,Ct);for(var It=Ct;It>=Et;It--){var Ot=O,kt=at(M(It),C).x;if(!vt&&kt>=h||It==Et)Ot=C,vt=C;else if(!vt)continue;z(It);var Ht=it(1,(kt-I)/I),Lt=at(M(It),O).x,At=bt/K(bt-Lt),Mt=lt(It,y),Pt=lt(It,L),Bt=A(It),Rt=Bt.x,$t=Bt.y;ft||(Pt.x=it(Pt.x,Rt-1)),gt||(Pt.y=it(Pt.y,$t-1));for(var Nt=Mt.x;Pt.x>=Nt;Nt++)for(var Ft=Mt.y;Pt.y>=Ft;Ft++){var s=B(It,Nt,Ft,yt,Rt,$t),zt=Ot;if(N(It,Nt,Ft,O),s.exists&&(vt&&!zt&&(R(It,Nt,Ft)?N(It,Nt,Ft,C):zt=C),zt)){var Dt=s.bounds.getTopLeft(),jt=s.bounds.getSize(),Ut=st(Dt,C),_t=at(jt,C);V||(_t=_t.plus(new P(1,1)));var Vt=st(Dt,O),Xt=at(jt,O),qt=Vt.plus(Xt.divide(2)),Zt=xt.distanceTo(qt);if(s.position=Ut,s.size=_t,s.distance=Zt,s.visibility=At,s.loaded){s.blendStart||(s.blendStart=yt);var Wt=yt-s.blendStart,Gt=0===ct?1:it(1,Wt/ct);ut&&(Gt*=Ht),s.opacity=Gt,o.push(s),Gt>=1?(N(It,Nt,Ft,C),Q&&s.lastDrawnTime!==Z&&N(It,Nt,Ft,O)):ct>Wt&&(ot=C),s.lastDrawnTime=yt}else s.loading||(mt=k(mt,s))}}if(U(It))break}for(var Qt=o.length-1;Qt>=0;Qt--){var s=o[Qt];i?s.drawCanvas(r):s.drawHTML(e),s.beingDrawn=C}for(var Kt=tt.length,Qt=0;Kt>Qt;Qt++){var Jt=tt[Qt],Yt=Jt.bounds,en=Yt.getTopLeft();ht&&ft&&(en.x+=J(wt.x)),Jt.position=st(en,C),Jt.size=at(Yt.getSize(),C),Jt.drawHTML(F)}mt&&(p(mt,yt),ot=C),rt=yt}}var R=this,F=N.getElement(l),D=N.makeNeutralElement(_?"canvas":v),j=_?D.getContext("2d"):S,U=new z,V=new M,X=t.minLevel,q=t.maxLevel,Z=t.tileSize,W=t.tileOverlap,G=t.height/t.width,Q={},K={},J={},Y=[],et={},tt=[],nt=[],rt=0,it=0,at=O,ot=C;R.elmt=F,R.profiler=V,function(){D.style.width=i,D.style.height=i,D.style.position=o,F.style.textAlign="left",F.appendChild(D)}(),R.addOverlay=function(e,t,n){var e=N.getElement(e);L(e)>=0||(tt.push(new s(e,t,n)),ot=C)},R.updateOverlay=function(e,t,n){var e=N.getElement(e),r=L(e);r>=0&&(tt[r].update(t,n),ot=C)},R.removeOverlay=function(e){var e=N.getElement(e),t=L(e);t>=0&&(tt[t].destroy(),tt.splice(t,1),ot=C)},R.clearOverlays=function(){for(;tt.length>0;)tt.pop().destroy(),ot=C},R.needsUpdate=function(){return ot},R.numTilesLoaded=function(){return Y.length},R.reset=function(){y(),it=(new Date).getTime(),ot=C},R.update=function(){V.beginUpdate(),at=C,B(),at=O,V.endUpdate()},R.idle=function(){}}})();var G,Q;(function(){function r(e,t,n){t==Q.TOP_RIGHT||t==Q.BOTTOM_RIGHT?n.insertBefore(e,n.firstChild):n.appendChild(e)}function u(e,t,n){var a=this,o=N.makeNeutralElement(g);a.elmt=e,a.anchor=t,a.container=n,a.wrapper=o,o.style.display=f,o.appendChild(e),t==Q.NONE&&(o.style.width=o.style.height=i),r(o,t,n)}function c(t){function r(){t.viewport&&t.viewport.goHome()}function i(){t.setFullPage(!t.isFullPage()),m.emulateExit(),t.viewport&&t.viewport.applyConstraints()}function o(){b=(new Date).getTime(),y=H.zoomPerSecond,v=C,u()}function s(){b=(new Date).getTime(),y=1/H.zoomPerSecond,v=C,u()}function l(){v=O}function u(){e.setTimeout(c,a)}function c(){if(v&&t.viewport){var e=(new Date).getTime(),r=e-b,i=n.pow(y,r/1e3);t.viewport.zoomBy(i),t.viewport.applyConstraints(),b=e,u()}}function p(){t.viewport&&(v=O,t.viewport.zoomBy(H.zoomPerClick/1),t.viewport.applyConstraints())}function f(){t.viewport&&(v=O,t.viewport.zoomBy(1/H.zoomPerClick),t.viewport.applyConstraints())}function g(){m.emulateEnter(),m.emulateExit()}function h(e,t){return H.imagePath+e+t}var m=S,v=O,y=S,b=S,E=new j(L.getString("Tooltips.ZoomIn"),h(T,B),h(T,R),h(T,z),h(T,_),o,l,p,o,l),k=new j(L.getString("Tooltips.ZoomOut"),h(I,B),h(I,R),h(I,z),h(I,_),s,l,f,s,l),A=new j(L.getString("Tooltips.Home"),h(x,B),h(x,R),h(x,z),h(x,_),S,r,S,S,S),M=new j(L.getString("Tooltips.FullPage"),h(w,B),h(w,R),h(w,z),h(w,_),S,i,S,S,S);return m=new U([E,k,A,M]),m.elmt[d]=C,t.addEventListener("open",g),m.elmt}var d="----seadragon----",p=N.getBrowser();Q=k.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4},u.prototype.destroy=function(){var e=this;e.wrapper.removeChild(e.elmt),e.container.removeChild(e.wrapper)},u.prototype.isVisible=function(){return this.wrapper.style.display!=m},u.prototype.setVisible=function(e){this.wrapper.style.display=e?f:m},u.prototype.setOpacity=function(e){this.elmt[d]&&p==$.IE?N.setElementOpacity(this.elmt,e,C):N.setElementOpacity(this.wrapper,e,C)};var w="fullpage",x="home",T="zoomin",I="zoomout",B="_rest.png",R="_grouphover.png",z="_hover.png",_="_pressed.png";G=k.Viewer=function(r){function d(){var t=rt.style,n=r.style,a=it.style,u=at.style,d=ot.style,p=st.style;n.width=i,n.height=i,n.position=s,n.left=h,n.top=h,n.textAlign="left",t.width=i,t.height=i,t.overflow=l,t.position=o,t.top=h,t.left=h,a.position=u.position=d.position=p.position=o,a.top=u.top=h,a.left=p.left=h,u.right=d.right=h,p.bottom=d.bottom=h,ft.clickHandler=V,ft.pressHandler=Z,ft.dragHandler=G,ft.releaseHandler=K,ft.scrollHandler=J,ft.setTracking(C),yt=c(tt),yt.style.marginRight="4px",yt.style.marginBottom="4px",tt.addControl(yt,Q.BOTTOM_RIGHT),gt.enterHandler=j,gt.exitHandler=U,gt.releaseHandler=_,gt.setTracking(C),e.setTimeout(z,1),r.appendChild(rt),r.appendChild(it),r.appendChild(at),r.appendChild(ot),r.appendChild(st),nt.innerHTML=b,nt.appendChild(r)}function p(e){var n="normal",r=t.createTextNode(e);rt.innerHTML=b,rt.appendChild(N.makeCenteredNode(r));var i=r.parentNode.style;i.fontFamily="verdana",i.fontSize="13px",i.fontSizeAdjust=m,i.fontStyle=n,i.fontStretch=n,i.fontVariant=n,i.fontWeight=n,i.lineHeight="1em",i.textAlign="center",i.textDecoration=m}function f(){return lt&&w(),Ot=(new Date).getTime(),e.setTimeout(function(){Ot>kt&&p(L.getString("Messages.Loading"))},2e3),Ot}function g(t,n,i){return kt=(new Date).getTime(),Ot>t?(A.log("Ignoring out-of-date open."),pt.trigger("ignore",tt),void 0):n?(rt.innerHTML=b,It=N.getElementSize(r),0===It.x||0===It.y?(e.setTimeout(function(){g(t,n,i)},a),void 0):(lt=n,ct=new W(It,lt.dimensions),ut=new q(lt,ct,rt),dt=new M,tt.source=lt,tt.viewport=ct,tt.drawer=ut,tt.profiler=dt,At=O,Mt=C,x(I),pt.trigger("open",tt),void 0)):(p(i),pt.trigger("error",tt),void 0)}function w(){tt.source=lt=S,tt.viewport=ct=S,tt.drawer=ut=S,tt.profiler=dt=S,rt.innerHTML=b}function x(t,r){if(At)return e.setTimeout(t,1);var i=(new Date).getTime(),r=r?r:i,a=r+1e3/60,o=n.max(1,a-i);return e.setTimeout(t,o)}function T(){if(lt){dt.beginUpdate();var e=N.getElementSize(r);!e.equals(It)&&e.x>0&&e.y>0&&(ct.resize(e,C),It=e,pt.trigger("resize",tt));var t=ct.update();!At&&t&&(pt.trigger("animationstart",tt),$()),t?(ut.update(),pt.trigger("animation",tt)):Mt||ut.needsUpdate()?(ut.update(),Mt=O):ut.idle(),At&&!t&&(pt.trigger("animationfinish",tt),!Pt&&z()),At=t,dt.endUpdate()}}function I(){if(lt){var e=(new Date).getTime();T(),x(arguments.callee,e)}}function k(e){for(var t=ht.length-1;t>=0;t--)if(ht[t].elmt==e)return t;return-1}function B(){e.setTimeout(R,20)}function R(){if(mt){var e=(new Date).getTime(),t=e-vt,r=1-t/xt;r=n.min(1,r),r=n.max(0,r);for(var i=ht.length-1;i>=0;i--)ht[i].setOpacity(r);r>0&&B()}}function $(){mt=O;for(var e=ht.length-1;e>=0;e--)ht[e].setOpacity(1)}function z(){H.autoHideControls&&(mt=C,vt=(new Date).getTime()+wt,e.setTimeout(B,wt))}function j(){Pt=C,$()}function U(e,t,n){n||(Pt=O,!At&&z())}function _(e,t,n,r){r||(Pt=O,!At&&z())}function V(e,t,n,r){if(ct&&n){var i=H.zoomPerClick,a=r?1/i:i;ct.zoomBy(a,ct.pointFromPixel(t,C)),ct.applyConstraints()}}function Z(e,t){ct&&(Ht=t,Lt=ct.getCenter())}function G(e,t,n){if(ct)if(H.constrainDuringPan){var r=t.minus(Ht),i=ct.deltaPointsFromPixels(r.negate(),C);ct.panTo(Lt.plus(i)),ct.applyConstraints()}else ct.panBy(ct.deltaPointsFromPixels(n.negate(),C))}function K(e,t,n){n&&ct&&ct.applyConstraints()}function J(e,t,r){if(ct){var i=n.pow(H.zoomPerScroll,r);ct.zoomBy(i,ct.pointFromPixel(t,C)),ct.applyConstraints()}}function Y(e){e=N.getEvent(e),27===e.keyCode&&tt.setFullPage(O)}var et=this,tt=et,nt=N.getElement(r),r=N.makeNeutralElement(v),rt=N.makeNeutralElement(v),it=N.makeNeutralElement(v),at=N.makeNeutralElement(v),ot=N.makeNeutralElement(v),st=N.makeNeutralElement(v),lt=S,ut=S,ct=S,dt=S,pt=new D,ft=new F(rt),gt=new F(r),ht=[],mt=C,vt=S,yt=S,wt=1e3,xt=2e3,vt=S,mt=O,Tt=t.body.style.width,bt=t.body.style.height,Et=t.body.style.overflow,St=t.documentElement.style.overflow,Ct=new P(1,1),It=S,Ot=0,kt=0,Ht=S,Lt=S,At=O,Mt=O,Pt=O;et.container=nt,et.elmt=r,et.source=S,et.drawer=S,et.viewport=S,et.profiler=S,et.tracker=ft,et.isOpen=function(){return!!lt},et.openDzi=function(e,t){var n=f(),r=N.createCallback(S,g,n);switch(typeof e){case E:X.createFromXml(e,t,r);break;default:X.createFromJson(e,r)}},et.openTileSource=function(t){var n=f();e.setTimeout(function(){g(n,t)},1)},et.close=function(){lt&&w()},et.addControl=function(e,t){var e=N.getElement(e);if(!(k(e)>=0)){var n=S;switch(t){case Q.TOP_RIGHT:n=at,e.style.position=s;break;case Q.BOTTOM_RIGHT:n=ot,e.style.position=s;break;case Q.BOTTOM_LEFT:n=st,e.style.position=s;break;case Q.TOP_LEFT:n=it,e.style.position=s;break;case Q.NONE:default:n=r,e.style.position=o}ht.push(new u(e,t,n))}},et.removeControl=function(e){var e=N.getElement(e),t=k(e);t>=0&&(ht[t].destroy(),ht.splice(t,1))},et.clearControls=function(){for(;ht.length>0;)ht.pop().destroy()},et.getNavControl=function(){return yt},et.isDashboardEnabled=function(){for(var e=ht.length-1;e>=0;e--)if(ht[e].isVisible())return C;return O},et.isFullPage=function(){return r.parentNode==t.body},et.isMouseNavEnabled=function(){return ft.isTracking()},et.isVisible=function(){return r.style.visibility!=l},et.setDashboardEnabled=function(e){for(var t=ht.length-1;t>=0;t--)ht[t].setVisible(e)},et.setFullPage=function(e){if(e!=tt.isFullPage()){var a=t.body,o=a.style,u=t.documentElement.style,c=r.style,d=rt.style;if(e?(Et=o.overflow,St=u.overflow,o.overflow=l,u.overflow=l,Tt=o.width,bt=o.height,o.width=i,o.height=i,d.backgroundColor="black",d.color="white",c.position=y,c.zIndex="99999999",a.appendChild(r),It=N.getWindowSize(),N.addEvent(t,"keydown",Y),j()):(o.overflow=Et,u.overflow=St,o.width=Tt,o.height=bt,d.backgroundColor=b,d.color=b,c.position=s,c.zIndex=b,nt.appendChild(r),It=N.getElementSize(nt),N.removeEvent(t,"keydown",Y),U()),ct){var p=ct.getBounds();ct.resize(It);var f=ct.getBounds();e?Ct=new P(f.width/p.width,f.height/p.height):(ct.update(),ct.zoomBy(n.max(Ct.x,Ct.y),S,C)),Mt=C,pt.trigger("resize",tt),T()}}},et.setMouseNavEnabled=function(e){ft.setTracking(e)},et.setVisible=function(e){r.style.visibility=e?b:l},et.showMessage=function(t,n){return n?(e.setTimeout(function(){!tt.isOpen()&&p(t)},n),void 0):(p(t),void 0)},et.addEventListener=function(e,t){pt.addListener(e,t)},et.removeEventListener=function(e,t){pt.removeListener(e,t)},d()}})()})(window,document,Math);